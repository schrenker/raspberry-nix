argocd-apps:
  applications:
    applications:
      namespace: argocd
      finalizers:
      - resources-finalizer.argocd.argoproj.io
      destination:
        name: ''
        namespace: argocd
        server: 'https://kubernetes.default.svc'
      source:
        path: workloads/applications
        repoURL: 'https://github.com/schrenker/raspberry-nix.git'
        targetRevision: HEAD
      project: default
      syncPolicy:
        automated:
          prune: true
          selfHeal: true
        syncOptions:
          - CreateNamespace=true
          - ApplyOutOfSyncOnly=true

  projects:
    core:
      namespace: argocd
      finalizers:
        - resources-finalizer.argocd.argoproj.io
      description: Core apps
      sourceRepos:
        - 'https://github.com/schrenker/raspberry-nix.git'
      destinations:
        - namespace: argocd
          server: https://kubernetes.default.svc
        - namespace: cilium
          server: https://kubernetes.default.svc
      clusterResourceWhitelist:
      - group: '*'
        kind: '*'
